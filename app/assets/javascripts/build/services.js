// Generated by CoffeeScript 1.9.3
(function() {
  var app;

  app = angular.module("kodiRemote.services", []);

  app.service("Topbar", [
    function() {
      var service;
      service = {
        item: null,
        setTitle: function(title) {
          return this.item = {
            type: "title",
            title: title
          };
        },
        setLink: function(url, label) {
          return this.item = {
            type: "link",
            url: url,
            label: label
          };
        }
      };
      return service;
    }
  ]);

  app.service("Remote", [
    "SERVER", "PORT", "$q", "$http", function(SERVER, PORT, $q, $http) {
      var methodRequest, perPage, request, service;
      request = function(payload) {
        var deferred, error, success;
        deferred = $q.defer();
        success = function(response) {
          if (!response.data) {
            deferred.reject(response);
          }
          if (response.data.error) {
            deferred.reject(response.data.error);
          }
          deferred.resolve(response.data.result);
        };
        error = function(response) {
          deferred.reject(response);
        };
        $http.post("http://" + SERVER + ":" + PORT + "/jsonrpc", payload).then(success, error);
        return deferred.promise;
      };
      methodRequest = function(method, params) {
        var payload;
        if (params == null) {
          params = {};
        }
        payload = {
          jsonrpc: "2.0",
          method: method,
          id: 1
        };
        if (params) {
          payload.params = params;
        }
        return request(payload);
      };
      perPage = 10;
      service = {
        methodRequest: methodRequest
      };
      return service;
    }
  ]);

}).call(this);
