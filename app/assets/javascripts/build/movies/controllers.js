// Generated by CoffeeScript 1.9.3
(function() {
  var app;

  app = angular.module("kodiRemote.movies.controllers", []);

  app.controller("MoviesController", [
    "$scope", "Topbar", "Movies", function($scope, Topbar, Movies) {
      Topbar.setTitle("Movies");
      $scope.movies = [];
      $scope.beforeSortLoad = function() {
        $scope.movies = [];
        return $scope.pagination.page = 1;
      };
      return $scope.load = function() {
        $scope.loading = true;
        return Movies.all($scope.pagination.page, $scope.sortParams).then(function(data) {
          var i, len, movie, ref;
          $scope.loading = false;
          ref = data.data;
          for (i = 0, len = ref.length; i < len; i++) {
            movie = ref[i];
            $scope.movies.push(movie);
          }
          Topbar.setTitle("Movies (" + data.total + ")");
          $scope.paginationAfterLoad(Movies.perPage, data.total);
        });
      };
    }
  ]);

  app.controller("MovieController", [
    "$scope", "$routeParams", "Movies", "Topbar", function($scope, $routeParams, Movies, Topbar) {
      var movieId;
      movieId = parseInt($routeParams.id);
      $scope.movie = null;
      return Movies.get(movieId).then(function(movieData) {
        $scope.movie = movieData.data;
        return Topbar.setLink("/movies", $scope.movie.title);
      });
    }
  ]);

}).call(this);
